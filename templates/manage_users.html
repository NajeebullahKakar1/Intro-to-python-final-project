{% extends "base.html" %}
{% block title %}Manage Users{% endblock %}
{% block content %}
<div class="card">
  <h2>Manage Users</h2>
  <table>
    <tr><th>Username</th><th>Role</th><th>Action</th></tr>
    {% for u in users %}
    <tr>
      <form method="POST" action="{{ url_for('admin.update_user_route', user_id=u.id) }}">
        <td><input name="username" value="{{ u.username }}"></td>
        <td>
          <select name="role">
            <option value="user" {% if u.role=='user' %}selected{% endif %}>User</option>
            <option value="admin" {% if u.role=='admin' %}selected{% endif %}>Admin</option>
          </select>
        </td>
        <td>
          <button type="submit">Update</button>
          <a href="{{ url_for('admin.delete_user_route', user_id=u.id) }}" onclick="return confirm('Delete?')">Delete</a>
        </td>
      </form>
    </tr>
    {% endfor %}
  </table>
</div>
{% endblock %}
